<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vlnění rybníka</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #0a0a0a;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 600px;
            height: 600px;
        }

        canvas {
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.8);
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="canvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = 600;
        canvas.height = 600;
        
        let time = 0;
        
        // Generátor komplexních vzorů
        class WaveGenerator {
            constructor() {
                this.nodes = [];
                for (let i = 0; i < 30; i++) {
                    this.nodes.push({
                        x: Math.random() * 600,
                        y: Math.random() * 600,
                        phase: Math.random() * Math.PI * 2,
                        speed: 0.3 + Math.random() * 1.2,
                        radius: 20 + Math.random() * 60
                    });
                }
            }
            
            getValue(x, y, t) {
                let sum = 0;
                for (let node of this.nodes) {
                    const dx = x - node.x;
                    const dy = y - node.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    sum += Math.sin(dist * 0.03 + t * node.speed + node.phase) * (node.radius / dist);
                }
                return sum;
            }
        }
        
        const waveGen = new WaveGenerator();
        
        function drawWaterSurface(t) {
            const centerX = 300;
            const centerY = 300;
            const speedMult = 2.5;
            
            // Základní barva vody - tmavý rybník
            const baseGradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, 300);
            baseGradient.addColorStop(0, '#2d3a2e');
            baseGradient.addColorStop(0.3, '#1f2b20');
            baseGradient.addColorStop(0.7, '#151d16');
            baseGradient.addColorStop(1, '#0a0f0b');
            ctx.fillStyle = baseGradient;
            ctx.fillRect(0, 0, 600, 600);
            
            // Komplexní vlnění - pixelové mapování
            const imageData = ctx.getImageData(0, 0, 600, 600);
            const data = imageData.data;
            
            for (let y = 0; y < 600; y += 4) {
                for (let x = 0; x < 600; x += 4) {
                    const waveValue = waveGen.getValue(x, y, t * speedMult);
                    const normalized = (Math.sin(waveValue) + 1) * 0.5;
                    
                    const idx = (y * 600 + x) * 4;
                    
                    // Hnědozelené odstíny podle vlnění
                    if (normalized > 0.6) {
                        // Světlejší odlesky - nažloutlé
                        data[idx] = 100 + normalized * 80;
                        data[idx + 1] = 90 + normalized * 70;
                        data[idx + 2] = 50 + normalized * 40;
                    } else if (normalized > 0.4) {
                        // Zelenkavé
                        data[idx] = 60 + normalized * 50;
                        data[idx + 1] = 70 + normalized * 60;
                        data[idx + 2] = 40 + normalized * 30;
                    } else {
                        // Tmavé stíny
                        data[idx] = 20 + normalized * 40;
                        data[idx + 1] = 30 + normalized * 45;
                        data[idx + 2] = 20 + normalized * 35;
                    }
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
            
            // Přidání složitějších vzorů přes to
            ctx.globalCompositeOperation = 'screen';
            ctx.globalAlpha = 0.15;
            
            // Kaustické vzory
            for (let i = 0; i < 25; i++) {
                const angle = (i / 25) * Math.PI * 2 + t * 0.2 * speedMult;
                const angle2 = (i / 25) * Math.PI * 2 + t * 0.3 * speedMult;
                const radius = 60 + Math.sin(t * 0.8 + i * 0.4) * 80;
                const x = centerX + Math.cos(angle) * radius + Math.sin(angle2) * 40;
                const y = centerY + Math.sin(angle) * radius + Math.cos(angle2) * 40;
                
                const size = 40 + Math.sin(t * speedMult + i) * 25;
                const grd = ctx.createRadialGradient(x, y, 0, x, y, size);
                grd.addColorStop(0, 'rgba(160, 140, 100, 0.6)');
                grd.addColorStop(0.4, 'rgba(120, 110, 70, 0.3)');
                grd.addColorStop(1, 'rgba(80, 75, 50, 0)');
                
                ctx.fillStyle = grd;
                ctx.fillRect(x - size, y - size, size * 2, size * 2);
            }
            
            ctx.globalAlpha = 1;
            ctx.globalCompositeOperation = 'source-over';
            
            // Deformované vlnové linie
            ctx.globalAlpha = 0.2;
            for (let i = 0; i < 15; i++) {
                ctx.strokeStyle = `rgba(${140 + i * 5}, ${130 + i * 4}, ${80 + i * 3}, 0.4)`;
                ctx.lineWidth = 1 + Math.sin(t + i) * 0.5;
                ctx.beginPath();
                
                const yBase = 50 + i * 35;
                for (let x = 0; x < 600; x += 3) {
                    const wave1 = Math.sin(x * 0.015 + t * speedMult + i * 0.3) * 25;
                    const wave2 = Math.sin(x * 0.025 - t * speedMult * 0.7 + i * 0.5) * 15;
                    const wave3 = Math.sin(x * 0.008 + t * speedMult * 0.5 + i) * 10;
                    const y = yBase + wave1 + wave2 + wave3;
                    
                    if (x === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.stroke();
            }
            
            // Jemné odlesky
            ctx.globalAlpha = 0.3;
            for (let i = 0; i < 30; i++) {
                const sparklePhase = (t * 3 * speedMult + i * 0.4) % (Math.PI * 2);
                const alpha = Math.max(0, Math.sin(sparklePhase));
                
                if (alpha > 0.2) {
                    const x = 100 + (i * 47) % 400;
                    const y = 100 + ((i * 71) % 400);
                    
                    ctx.fillStyle = `rgba(180, 160, 110, ${alpha * 0.6})`;
                    ctx.beginPath();
                    ctx.arc(x, y, 2 + alpha * 2, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            ctx.globalAlpha = 1;
        }
        
        function animate() {
            const speed = 0.04;
            time += speed;
            
            drawWaterSurface(time);
            requestAnimationFrame(animate);
        }
        
        animate();
    </script>
</body>
</html>